{"title":"05 正则表达式模块","uid":"059ec1eb0f233ad930c259994ad352a0","slug":"python爬虫/05 正则表达式模块","date":"2022-10-19T06:58:00.000Z","updated":"2022-10-19T10:57:06.331Z","comments":true,"path":"api/articles/python爬虫/05 正则表达式模块.json","keywords":null,"cover":null,"content":"<h1 id=\"正则表达式模块\"><a href=\"#正则表达式模块\" class=\"headerlink\" title=\"正则表达式模块\"></a>正则表达式模块</h1><p><strong>Python通过自带的re模块来支持正则表达式</strong></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><ol>\n<li>先将正则表达式的String编译为“Pattern”实例</li>\n<li>使用Pattern实例处理结文本并且获得匹配结果（一个Match实例）</li>\n<li>使用Match实例获得信息</li>\n</ol></blockquote>\n<h2 id=\"re模块常用的方法\"><a href=\"#re模块常用的方法\" class=\"headerlink\" title=\"re模块常用的方法\"></a>re模块常用的方法</h2><table>\n<thead>\n<tr>\n<th align=\"left\">方法名</th>\n<th align=\"left\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">compile</td>\n<td align=\"left\">将正则表达式String转化为Pattern匹配对象。</td>\n</tr>\n<tr>\n<td align=\"left\">match</td>\n<td align=\"left\">将输入的String从头开始对输入的正则表达式进行匹配，如果遇到无法匹配的字符或到达String的末尾，则立即放回None，否则获取匹配结果。</td>\n</tr>\n<tr>\n<td align=\"left\">search</td>\n<td align=\"left\">将输入的整个String进行扫描，对输入的正则表达式进行匹配，并获取匹配结果，如果没有匹配结果，则返回None。</td>\n</tr>\n<tr>\n<td align=\"left\">split</td>\n<td align=\"left\">以能够匹配的String作为分隔符，将String分割后返回一个列表。</td>\n</tr>\n<tr>\n<td align=\"left\">findall</td>\n<td align=\"left\">搜索整个String，返回一个包含全部能匹配子串的列表。</td>\n</tr>\n<tr>\n<td align=\"left\">finditer</td>\n<td align=\"left\">与findall方法的作用类似，以迭代器的形式返回结果。</td>\n</tr>\n<tr>\n<td align=\"left\">sub</td>\n<td align=\"left\">使用指定内容替换字符串中匹配的每一个子串内容。</td>\n</tr>\n</tbody></table>\n<h3 id=\"compile方法\"><a href=\"#compile方法\" class=\"headerlink\" title=\"compile方法\"></a>compile方法</h3><p><strong>将正则表达式的字符串转化为Pattern匹配对象</strong></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">re.compile(pattern,flags&#x3D;0)</code></pre>\n\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Pattern</td>\n<td>接收str，表示需要转换的正则表达式的字符串。无默认值。</td>\n</tr>\n<tr>\n<td>flags</td>\n<td>接收str，表示匹配的模式，取值为运算符”|”时表示同时生效，如re.I|re.M。默认为0。</td>\n</tr>\n</tbody></table>\n<h3 id=\"search方法\"><a href=\"#search方法\" class=\"headerlink\" title=\"search方法\"></a>search方法</h3><p><strong>该方法将输入的整个字符串进行扫描，并对输入的正则表达式进行匹配，若无匹配的字符，则立即返回None，否则获取匹配结果。</strong></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">re.search(pattern,string,flags&#x3D;0)</code></pre>\n\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Pattern</td>\n<td>接收Pattern实例，表示转换后的正则表达式。无默认值。</td>\n</tr>\n<tr>\n<td>string</td>\n<td>接收str，表示输入的需要匹配的字符串。无默认值。</td>\n</tr>\n<tr>\n<td>flags</td>\n<td>接收str，表示匹配的模式，取值为运算符”|”时表示同时生效。</td>\n</tr>\n</tbody></table>\n<h3 id=\"finall方法\"><a href=\"#finall方法\" class=\"headerlink\" title=\"finall方法\"></a>finall方法</h3><p><strong>该方法搜索整个string，并放回一个包含所有能匹配的子串的列表</strong></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">re.finall(pattern,string,flags&#x3D;0)</code></pre>\n\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Pattern</td>\n<td>接收Pattern实例，表示转换后的正则表达式。无默认值。</td>\n</tr>\n<tr>\n<td>string</td>\n<td>接收str，表示输入的需要匹配的字符串。无默认值。</td>\n</tr>\n<tr>\n<td>flags</td>\n<td>接收str，表示匹配的模式，取值为运算符”|”时表示同时生效，意思为“or”。</td>\n</tr>\n</tbody></table>\n<p><strong>使用finall方法找出字符串中的所有数字</strong></p>\n<p>若 str &#x3D; a1b2c3d4e5f6g7 找出其中的所有数字：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">import re\n\npat &#x3D; re.compile(r&#39;\\d+&#39;)\nstr &#x3D; &#39;a1b2c3d4e5f6g7&#39;\t#设定：str &#x3D; a1b2c3d4e5f6g7\nresult &#x3D; re.findall(pat, str)\nprint(result)   #输出：[&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;]</code></pre>\n\n\n\n<h2 id=\"获取网页中的标题内容\"><a href=\"#获取网页中的标题内容\" class=\"headerlink\" title=\"获取网页中的标题内容\"></a>获取网页中的标题内容</h2><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">import re\nimport requests\n\nurl &#x3D; &#39;http:&#x2F;&#x2F;www.tipdm.com&#x2F;tipdm&#x2F;index.html&#39;\n\nheader &#x3D; &#123;\n    &#39;User-Agent&#39;: &#39;Mozilla&#x2F;5.0 (Macintosh; Intel xxx OS X xx_xx_x) AppleWebKit&#x2F;xxx.xx (KHTML, like Gecko) Chrome&#x2F;xxx.x.x.x xxxxx&#x2F;xxx.xx&#39;,\n    &#39;Cookie&#39;: &#39;_site_id_cookie&#x3D;xx; _site_id_cookie&#x3D;xx.x; JSESSIONID&#x3D;abcdefg123456abcd1234; clientlanguage&#x3D;zh_CN&#39;\n&#125;\nrequests_get &#x3D; requests.get(url, header)\nrequests_get.encoding &#x3D; &#39;utf-8&#39;\nhtml_text &#x3D; requests_get.text\n\n# &lt;title&gt;泰迪科技-专注于大数据技术研发及知识传播&lt;&#x2F;title&gt;\npattern &#x3D; r&#39;(?&lt;&#x3D;&lt;title&gt;).*?(?&#x3D;&lt;&#x2F;title&gt;)&#39;\nresult_com &#x3D; re.compile(pattern)\nresult_search &#x3D; re.search(result_com, html_text)\n# &lt;re.Match object; span&#x3D;(178, 198), match&#x3D;&#39;泰迪科技-专注于大数据技术研发及知识传播&#39;&gt;\nprint(result_search)\n# 泰迪科技-专注于大数据技术研发及知识传播\nprint(result_search.group())</code></pre>\n\n<p><strong>一步到位</strong></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">import re\nimport requests\n\nurl &#x3D; &#39;http:&#x2F;&#x2F;www.tipdm.com&#x2F;tipdm&#x2F;index.html&#39;\nheader &#x3D; &#123;\n    &#39;User-Agent&#39;: &#39;Mozilla&#x2F;5.0 (Macintosh; Intel xxx OS X xx_xx_x) AppleWebKit&#x2F;xxx.xx (KHTML, like Gecko) Chrome&#x2F;xxx.x.x.x xxxxx&#x2F;xxx.xx&#39;,\n    &#39;Cookie&#39;: &#39;_site_id_cookie&#x3D;xx; _site_id_cookie&#x3D;xx.x; JSESSIONID&#x3D;abcdefg123456abcd1234; clientlanguage&#x3D;zh_CN&#39;\n&#125;\nrequests_get &#x3D; requests.get(url, header)\n# requests_get.encoding &#x3D; &#39;utf-8&#39;\nhtml_text &#x3D; requests_get.text\n# &lt;title&gt;泰迪科技-专注于大数据技术研发及知识传播&lt;&#x2F;title&gt;\nprint(re.findall(r&#39;(?&lt;&#x3D;&lt;title&gt;).*?(?&#x3D;&lt;&#x2F;title&gt;)&#39;, html_text))</code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>其实不推荐使用正则表达式去定位特定节点来获得其中想要的内容的。</p>\n<p>✅推荐使用：Xpath、BeautifulSoup。</p></blockquote>\n","feature":true,"text":"正则表达式模块Python通过自带的re模块来支持正则表达式 先将正则表达式的String编译为“Pattern”实例 使用Pattern实例处理结文本并且获得匹配结果（一个Match实例） 使用Match实例获得信息 re模块常用的方法 方法名 说明 compile 将正则表达...","link":"","photos":[],"count_time":{"symbolsCount":"3.2k","symbolsTime":"3 mins."},"categories":[{"name":"计算机","slug":"计算机","count":8,"path":"api/categories/计算机.json"},{"name":"Python爬虫","slug":"计算机/Python爬虫","count":5,"path":"api/categories/计算机/Python爬虫.json"}],"tags":[{"name":"笔记","slug":"笔记","count":10,"path":"api/tags/笔记.json"},{"name":"Python爬虫","slug":"Python爬虫","count":5,"path":"api/tags/Python爬虫.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%A8%A1%E5%9D%97\"><span class=\"toc-text\">正则表达式模块</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#re%E6%A8%A1%E5%9D%97%E5%B8%B8%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">re模块常用的方法</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#compile%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">compile方法</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#search%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">search方法</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#finall%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">finall方法</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%8E%B7%E5%8F%96%E7%BD%91%E9%A1%B5%E4%B8%AD%E7%9A%84%E6%A0%87%E9%A2%98%E5%86%85%E5%AE%B9\"><span class=\"toc-text\">获取网页中的标题内容</span></a></li></ol></li></ol>","author":{"name":"Chan_Honman","slug":"blog-author","avatar":"/images/avatar.jpeg","link":"/","description":"这家伙很坏 什么都没留下","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Java基础","uid":"3316961ecf1671c6065b043220187c47","slug":"Java/Java基础","date":"2022-10-26T08:32:00.000Z","updated":"2022-10-29T07:41:29.098Z","comments":true,"path":"api/articles/Java/Java基础.json","keywords":null,"cover":"/images/Java/1.png","text":"Java基础 Java对大小写敏感。 关键字class对意思是类。Java是面向对象的语言，所有代码必须放在class里面。 编译后的源文件，得到相应的字节码文件，编译起为每个类生成独立的字节码文件。 main方法是Java应用程序的入口方法 固定格式: Public stati...","link":"","photos":[],"count_time":{"symbolsCount":"6.4k","symbolsTime":"6 mins."},"categories":[{"name":"计算机","slug":"计算机","count":8,"path":"api/categories/计算机.json"},{"name":"Java","slug":"计算机/Java","count":1,"path":"api/categories/计算机/Java.json"}],"tags":[{"name":"笔记","slug":"笔记","count":10,"path":"api/tags/笔记.json"},{"name":"Java","slug":"Java","count":1,"path":"api/tags/Java.json"}],"author":{"name":"Chan_Honman","slug":"blog-author","avatar":"/images/avatar.jpeg","link":"/","description":"这家伙很坏 什么都没留下","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"《乔布斯激情演讲》","uid":"7525935f3d7857db9f6e83da3969ebe0","slug":"Reading Book/《乔布斯激情演讲》江涛","date":"2022-09-21T09:30:00.000Z","updated":"2022-10-08T12:05:53.919Z","comments":true,"path":"api/articles/Reading Book/《乔布斯激情演讲》江涛.json","keywords":null,"cover":null,"text":"《乔布斯激情演讲》江涛Stay Hungry, Stay Foolish求知若饥，虚心若愚——史蒂夫·乔布斯2005年在斯坦福大学演讲 ​ 2005年6月，未能读完大学就版图退学，但后来功成名就的乔布斯被邀请到斯坦福大学的毕业典礼上发表演说。那是，他刚完成胰腺癌手术。 ​ 在这次...","link":"","photos":[],"count_time":{"symbolsCount":"6.9k","symbolsTime":"6 mins."},"categories":[{"name":"Reading Book","slug":"Reading-Book","count":2,"path":"api/categories/Reading-Book.json"}],"tags":[{"name":"Reading Book","slug":"Reading-Book","count":2,"path":"api/tags/Reading-Book.json"}],"author":{"name":"Chan_Honman","slug":"blog-author","avatar":"/images/avatar.jpeg","link":"/","description":"这家伙很坏 什么都没留下","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}